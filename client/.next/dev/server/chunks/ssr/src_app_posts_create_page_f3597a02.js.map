{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/React%20introduction/DEMOreact/react-ssr-blog/client/src/app/posts/create/page.js"],"sourcesContent":["//‚ÄúÂèëÂ∏ÉÊñáÁ´†‚ÄùÈ°µÈù¢\r\n'use client'; // ËøôÊòØ‰∏Ä‰∏™ÂÆ¢Êà∑Á´Ø‰∫§‰∫íÈ°µÈù¢ÔºåÂøÖÈ°ªÊ†áËÆ∞ 'use client'\r\n\r\nimport React, { useState } from 'react';\r\nimport { Form, Input, Button, message, Card, Modal } from 'antd';\r\nimport { RobotOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'next/navigation'; // Next.js ÁöÑË∑ØÁî±Ë∑≥ËΩ¨Èí©Â≠ê\r\nconst { TextArea } = Input;\r\n\r\n\r\n// ÊúçÂä°Á´ØËøêË°åÁöÑËé∑ÂèñÊñáÁ´†ÂàóË°®\r\nexport default function CreatePostPage() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [aiLoading, setAiLoading] = useState(false); // AI ÁîüÊàê‰∏≠ÁöÑ loading Áä∂ÊÄÅ\r\n  const [isModalOpen, setIsModalOpen] = useState(false); // ÊéßÂà∂ÂºπÁ™óÊòæÁ§∫\r\n  const [aiTopic, setAiTopic] = useState(''); // Â≠òÂÇ®Áî®Êà∑ËæìÂÖ•ÁöÑ AI ‰∏ªÈ¢ò\r\n  const router = useRouter();\r\n  const [form] = Form.useForm();\r\n\r\n  // Ë°®ÂçïÊèê‰∫§Â§ÑÁêÜ\r\n  const onFinish = async (values) => {\r\n    setLoading(true);\r\n    try {\r\n      // ÂèëÈÄÅËØ∑Ê±ÇÁªôÊàë‰ª¨ÁöÑ Express ÂêéÁ´Ø\r\n      await axios.post('http://localhost:5000/api/posts', values);\r\n      \r\n      message.success('ÂèëÂ∏ÉÊàêÂäüÔºÅÂç≥Â∞ÜËøîÂõûÈ¶ñÈ°µ...');\r\n      \r\n      // Âª∂Ëøü 1 ÁßíÂêéË∑≥ËΩ¨ÂõûÈ¶ñÈ°µ\r\n      setTimeout(() => {\r\n        router.push('/'); \r\n        router.refresh(); // Âº∫Âà∂Âà∑Êñ∞ÔºåÁ°Æ‰øùÈ¶ñÈ°µËé∑ÂèñÊúÄÊñ∞Êï∞ÊçÆ\r\n      }, 1000);\r\n      \r\n    } catch (error) {\r\n      console.error(error);\r\n      message.error('ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÂêéÁ´ØÊúçÂä°ÊòØÂê¶ÂêØÂä®');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Â§ÑÁêÜ AI ÁîüÊàêËØ∑Ê±Ç\r\n  const handleAiGenerate = async () => {\r\n      // Á¨¨‰∏ÄÊ≠•ÔºöÊ†°È™å‰∏ªÈ¢òÈùûÁ©∫\r\n      if (!aiTopic.trim()) return message.warning('ËØ∑ËæìÂÖ•‰∏ªÈ¢ò');\r\n\r\n      setAiLoading(true);\r\n      try {\r\n          const res = await axios.post('http://localhost:5000/api/ai/generate', {\r\n              topic: aiTopic\r\n          });\r\n\r\n          if (res.data.success) {\r\n              const { title, summary, content } = res.data.data;\r\n              \r\n              // Ê†∏ÂøÉÂäüËÉΩÔºöËá™Âä®Â°´ÂÖÖË°®Âçï\r\n              form.setFieldsValue({\r\n                  title,\r\n                  summary,\r\n                  content\r\n              });\r\n              \r\n              message.success('AI ÂÜô‰ΩúÂÆåÊàêÔºå‰Ω†ÂèØ‰ª•‰øÆÊîπÂêéÂèëÂ∏ÉÔΩû');\r\n              setIsModalOpen(false); // ÂÖ≥Èó≠ÂºπÁ™ó\r\n          }\r\n      } catch (error) {\r\n          message.error('AI ÁîüÊàêÂ§±Ë¥•ÔºåËØ∑ÈáçËØï');\r\n      } finally {\r\n          setAiLoading(false);\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: '800px', margin: '50px auto', padding: '0 20px' }}>\r\n      <Card \r\n        title=\"‚úçÔ∏è ÂèëÂ∏ÉÊñ∞ÊñáÁ´†\" \r\n        bordered={false} \r\n        // Âú®Âç°ÁâáÂè≥‰∏äËßíÂ¢ûÂä† AI ÊåâÈíÆ\r\n        extra={\r\n            <Button \r\n                type=\"dashed\" \r\n                icon={<RobotOutlined />} \r\n                onClick={() => setIsModalOpen(true)}\r\n                style={{ color: '#1677ff', borderColor: '#1677ff' }}\r\n            >\r\n                AI ÂÜô‰ΩúÂä©Êâã\r\n            </Button>\r\n        }\r\n      >\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          onFinish={onFinish}\r\n          initialValues={{ content: '' }}\r\n        >\r\n          {/* ... Title, Summary, Content ÁöÑ Form.Item ‰ª£Á†Å‰øùÊåÅ‰∏çÂèò ... */}\r\n           <Form.Item label=\"ÊñáÁ´†Ê†áÈ¢ò\" name=\"title\" rules={[{ required: true }]}>\r\n            <Input placeholder=\"ÁªôÊñáÁ´†Ëµ∑‰∏™Â•ΩÂêçÂ≠ó...\" size=\"large\" />\r\n          </Form.Item>\r\n          <Form.Item label=\"ÊëòË¶Å (ÂèØÈÄâ)\" name=\"summary\">\r\n            <Input placeholder=\"ÁÆÄÁü≠ÁöÑ‰ªãÁªç...\" />\r\n          </Form.Item>\r\n          <Form.Item label=\"ÊñáÁ´†ÂÜÖÂÆπ\" name=\"content\" rules={[{ required: true }]}>\r\n            <TextArea rows={10} placeholder=\"Ê≠£Êñá...\" showCount maxLength={10000} />\r\n          </Form.Item>\r\n\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\" loading={loading} block size=\"large\">\r\n              üöÄ Á´ãÂç≥ÂèëÂ∏É\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n\r\n      {/* AI ËæìÂÖ•ÂºπÁ™ó */}\r\n      <Modal \r\n        title=\"ü§ñ AI ÊñáÁ´†ÁîüÊàêÂô®\" \r\n        open={isModalOpen} \r\n        onCancel={() => setIsModalOpen(false)}\r\n        footer={null} // Ëá™ÂÆö‰πâÂ∫ïÈÉ®ÊåâÈíÆ\r\n      >\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: 15, padding: '20px 0' }}>\r\n              <Input \r\n                placeholder=\"‰Ω†ÊÉ≥ÂÜô‰ªÄ‰πàÔºü‰æãÂ¶ÇÔºö100Â§©ÈÄüÊàêÂ§ßÂé®\" \r\n                value={aiTopic}\r\n                onChange={(e) => setAiTopic(e.target.value)}\r\n                onPressEnter={handleAiGenerate}\r\n              />\r\n              <Button \r\n                type=\"primary\" \r\n                onClick={handleAiGenerate} \r\n                loading={aiLoading}\r\n                icon={<RobotOutlined />}\r\n              >\r\n                ÂºÄÂßãÁîüÊàêÂàùÁ®ø\r\n              </Button>\r\n              {aiLoading && <div style={{textAlign: 'center', color: '#999'}}>AI Ê≠£Âú®ÊÄùËÄÉ‰∏≠ÔºåËøôÂèØËÉΩÈúÄË¶ÅÂá†ÁßíÈíü...</div>}\r\n          </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,UAAU;;;;;;AAGV;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA,sOAA6C,kBAAkB;AAN/D,cAAc,gCAAgC;;;;;;;AAO9C,MAAM,EAAE,QAAQ,EAAE,GAAG,yLAAK;AAIX,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC,QAAQ,qBAAqB;IACxE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC,QAAQ,SAAS;IAChE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,KAAK,gBAAgB;IAC5D,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,KAAK,GAAG,sLAAI,CAAC,OAAO;IAE3B,SAAS;IACT,MAAM,WAAW,OAAO;QACtB,WAAW;QACX,IAAI;YACF,sBAAsB;YACtB,MAAM,gJAAK,CAAC,IAAI,CAAC,mCAAmC;YAEpD,+LAAO,CAAC,OAAO,CAAC;YAEhB,eAAe;YACf,WAAW;gBACT,OAAO,IAAI,CAAC;gBACZ,OAAO,OAAO,IAAI,kBAAkB;YACtC,GAAG;QAEL,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,+LAAO,CAAC,KAAK,CAAC;QAChB,SAAU;YACR,WAAW;QACb;IACF;IAEA,aAAa;IACb,MAAM,mBAAmB;QACrB,aAAa;QACb,IAAI,CAAC,QAAQ,IAAI,IAAI,OAAO,+LAAO,CAAC,OAAO,CAAC;QAE5C,aAAa;QACb,IAAI;YACA,MAAM,MAAM,MAAM,gJAAK,CAAC,IAAI,CAAC,yCAAyC;gBAClE,OAAO;YACX;YAEA,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;gBAClB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAI,IAAI,CAAC,IAAI;gBAEjD,cAAc;gBACd,KAAK,cAAc,CAAC;oBAChB;oBACA;oBACA;gBACJ;gBAEA,+LAAO,CAAC,OAAO,CAAC;gBAChB,eAAe,QAAQ,OAAO;YAClC;QACJ,EAAE,OAAO,OAAO;YACZ,+LAAO,CAAC,KAAK,CAAC;QAClB,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,qBACE,8OAAC;QAAI,OAAO;YAAE,UAAU;YAAS,QAAQ;YAAa,SAAS;QAAS;;0BACtE,8OAAC,sLAAI;gBACH,OAAM;gBACN,UAAU;gBACV,iBAAiB;gBACjB,qBACI,8OAAC,4MAAM;oBACH,MAAK;oBACL,oBAAM,8OAAC,qOAAa;;;;;oBACpB,SAAS,IAAM,eAAe;oBAC9B,OAAO;wBAAE,OAAO;wBAAW,aAAa;oBAAU;8BACrD;;;;;;0BAKL,cAAA,8OAAC,sLAAI;oBACH,MAAM;oBACN,QAAO;oBACP,UAAU;oBACV,eAAe;wBAAE,SAAS;oBAAG;;sCAG5B,8OAAC,sLAAI,CAAC,IAAI;4BAAC,OAAM;4BAAO,MAAK;4BAAQ,OAAO;gCAAC;oCAAE,UAAU;gCAAK;6BAAE;sCAC/D,cAAA,8OAAC,yLAAK;gCAAC,aAAY;gCAAc,MAAK;;;;;;;;;;;sCAExC,8OAAC,sLAAI,CAAC,IAAI;4BAAC,OAAM;4BAAU,MAAK;sCAC9B,cAAA,8OAAC,yLAAK;gCAAC,aAAY;;;;;;;;;;;sCAErB,8OAAC,sLAAI,CAAC,IAAI;4BAAC,OAAM;4BAAO,MAAK;4BAAU,OAAO;gCAAC;oCAAE,UAAU;gCAAK;6BAAE;sCAChE,cAAA,8OAAC;gCAAS,MAAM;gCAAI,aAAY;gCAAQ,SAAS;gCAAC,WAAW;;;;;;;;;;;sCAG/D,8OAAC,sLAAI,CAAC,IAAI;sCACR,cAAA,8OAAC,4MAAM;gCAAC,MAAK;gCAAU,UAAS;gCAAS,SAAS;gCAAS,KAAK;gCAAC,MAAK;0CAAQ;;;;;;;;;;;;;;;;;;;;;;0BAQpF,8OAAC,yLAAK;gBACJ,OAAM;gBACN,MAAM;gBACN,UAAU,IAAM,eAAe;gBAC/B,QAAQ;0BAEN,cAAA,8OAAC;oBAAI,OAAO;wBAAE,SAAS;wBAAQ,eAAe;wBAAU,KAAK;wBAAI,SAAS;oBAAS;;sCAC/E,8OAAC,yLAAK;4BACJ,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4BAC1C,cAAc;;;;;;sCAEhB,8OAAC,4MAAM;4BACL,MAAK;4BACL,SAAS;4BACT,SAAS;4BACT,oBAAM,8OAAC,qOAAa;;;;;sCACrB;;;;;;wBAGA,2BAAa,8OAAC;4BAAI,OAAO;gCAAC,WAAW;gCAAU,OAAO;4BAAM;sCAAG;;;;;;;;;;;;;;;;;;;;;;;AAK9E"}}]
}